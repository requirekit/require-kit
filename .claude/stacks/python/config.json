{
  "name": "python-api-stack",
  "version": "1.0.0",
  "description": "Python API stack configuration with FastAPI",
  "extends": ["base"],
  
  "dependencies": {
    "framework": "fastapi",
    "language": "python>=3.11",
    "server": "uvicorn",
    "orm": "sqlalchemy",
    "validation": "pydantic"
  },
  
  "testing": {
    "unit": {
      "framework": "pytest",
      "config": "pytest.ini",
      "pattern": "test_*.py",
      "coverage": {
        "threshold": 90,
        "omit": ["tests/*", "migrations/*"],
        "reporters": ["term", "html", "xml"]
      }
    },
    "integration": {
      "framework": "pytest",
      "fixtures": "tests/conftest.py",
      "database": "pytest-postgresql",
      "http": "httpx"
    },
    "bdd": {
      "framework": "pytest-bdd",
      "features": "tests/features",
      "pattern": "*.feature"
    },
    "performance": {
      "framework": "locust",
      "config": "locustfile.py"
    }
  },
  
  "quality": {
    "linting": {
      "tools": ["ruff", "mypy", "black"],
      "config": {
        "ruff": {
          "line-length": 100,
          "select": ["E", "F", "I", "N", "W"]
        },
        "mypy": {
          "strict": true,
          "warn_return_any": true
        },
        "black": {
          "line-length": 100
        }
      }
    },
    "security": {
      "tools": ["bandit", "safety"],
      "pre-commit": true
    },
    "complexity": {
      "max_complexity": 10,
      "max_line_length": 100,
      "max_function_length": 50
    }
  },
  
  "structure": {
    "src": {
      "api": "src/api",
      "models": "src/models",
      "services": "src/services",
      "repositories": "src/repositories",
      "schemas": "src/schemas",
      "core": "src/core",
      "utils": "src/utils"
    },
    "tests": {
      "unit": "tests/unit",
      "integration": "tests/integration",
      "e2e": "tests/e2e",
      "fixtures": "tests/fixtures"
    }
  },
  
  "commands": {
    "dev": "uvicorn src.main:app --reload",
    "start": "uvicorn src.main:app",
    "test": "pytest",
    "test:unit": "pytest tests/unit",
    "test:integration": "pytest tests/integration",
    "test:bdd": "pytest tests/features",
    "test:coverage": "pytest --cov=src --cov-report=term-missing",
    "lint": "ruff check . && mypy .",
    "format": "black . && ruff check . --fix",
    "migrate": "alembic upgrade head",
    "security": "bandit -r src && safety check"
  },
  
  "templates": {
    "endpoint": "templates/endpoint.py.hbs",
    "service": "templates/service.py.hbs",
    "repository": "templates/repository.py.hbs",
    "model": "templates/model.py.hbs",
    "schema": "templates/schema.py.hbs",
    "test": "templates/test_endpoint.py.hbs"
  },
  
  "api": {
    "versioning": "path",
    "documentation": {
      "openapi": "3.0.0",
      "redoc": true,
      "swagger": true
    },
    "middleware": [
      "cors",
      "rate_limiting",
      "request_id",
      "logging"
    ],
    "authentication": {
      "type": "jwt",
      "algorithm": "RS256"
    }
  },
  
  "database": {
    "migrations": "alembic",
    "connection_pool": {
      "min_size": 10,
      "max_size": 20
    },
    "query_logging": true
  },
  
  "performance": {
    "response_time": {
      "p50": "50ms",
      "p95": "200ms",
      "p99": "500ms"
    },
    "throughput": "1000 req/s",
    "concurrent_users": 100
  },
  
  "monitoring": {
    "metrics": "prometheus",
    "logging": "structured",
    "tracing": "opentelemetry",
    "health_check": "/health"
  }
}
